var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$(document).ready(function(){$("#switchTheme").on("click",function(){switchTheme()});$("#startDraft").on("click",function(){getDraftStatus()});$("#overrideHeroes").change(function(){$("#overrideHeroesField").toggle()});$(".hero-select").on("click",function(){$(this).hasClass("hero-highlight")?newMessage($(this).data("hero")):$(this).addClass("hero-highlight");return!1});"undefined"!=typeof hash&&updater.start();new ClipboardJS(".clipboard")});
function switchTheme(){axios.get(location.protocol+"//"+location.host+"/theme").then(function(a){location.reload()})["catch"](function(a){return a})}function getDraftStatus(){axios.get(location.protocol+"//"+location.host+"/draftstatus/"+room).then(function(a){a.data.ready?window.location=admin_url:(toastr.options={positionClass:"toast-top-center"},toastr.error("Not all the teams are joined yet!"))})["catch"](function(a){return a})}function newMessage(a){updater.socket.send(a)}
var updater={socket:null,start:function(){var a="ws://";"https:"==location.protocol&&(a="wss://");updater.socket=new WebSocket(a+location.host+"/chatsocket/"+hash);updater.socket.onmessage=function(a){updater.showMessage(JSON.parse(a.data))}},showMessage:function(a){"update"==a.type?(updateDraft(a.message,a.index),updateTurnIndicator(a.index)):"time"==a.type?$("#timer").text(a.message):"bonustime"==a.type?$("#bonustimer-"+a.team).text(a.message):"message"==a.type?(toastr.options={positionClass:"toast-top-center"},
toastr.error(a.message),removeHeroHighlight()):"start"==a.type?(toastr.options={positionClass:"toast-top-center"},toastr.success(a.message),turnIndicator(1)):"history"==a.type&&updateHistory(a.message)}};function removeTurnIndicator(){$(".draft-item").removeClass("turn-indicator")}function turnIndicator(a){$(".draft-item[data-order='"+a+"']").addClass("turn-indicator")}function lockHero(a){$(a).removeClass("hero-select hero-highlight").addClass("hero-locked").off("click")}
function removeHeroHighlight(){$(".hero-select").removeClass("hero-highlight")}function updateDraft(a,b){var c=$(".draft-item > img[data-order='"+b+"']"),d=$(".hero-select[data-hero='"+a+"']");$(c).attr("src","/static/images/heroes/"+a+".png");lockHero(d)}function updateTurnIndicator(a){removeTurnIndicator();turnIndicator(a+1)}function updateHistory(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,updateDraft(b.message,b.index)};
